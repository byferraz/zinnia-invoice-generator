{"ast":null,"code":"import _objectSpread from\"/Users/ferraz/AutoInvoice/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Download,Plus,Edit2,Trash2,Save,X,FileText,Users,Calendar,Loader,AlertTriangle,Printer,Clock}from'lucide-react';// A simple, reusable modal component for confirmations\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ConfirmationModal=_ref=>{let{isOpen,onClose,onConfirm,title,children}=_ref;if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl p-6 w-full max-w-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mr-4 flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:h-10 sm:w-10\",children:/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-6 w-6 text-red-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:title}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:children})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 sm:ml-3 sm:w-auto sm:text-sm\",onClick:onConfirm,children:\"Confirmar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm\",onClick:onClose,children:\"Cancelar\"})]})]})});};// Componente principal del generador de facturas\nconst ZinniaInvoiceGenerator=()=>{const[activeTab,setActiveTab]=useState('generate');const[isGenerating,setIsGenerating]=useState(false);// Preloaded client list\nconst preloadedClients=[{id:1,name:\"FEK MANAGEMENT SPAIN SL\",taxId:\"B75822965\",address:\"Calle Camino del Ancho 2, Pta. 45, 28109, Alcobendas, Madrid, España\",address2:\"\",standardAmount:\"2500.00\",standardSubject:\"Marketing and Strategy Services\",taxRate:\"0\",hasTax:false},{id:2,name:\"ESTATING OPERATIONS LUXEMBOURG SARL\",taxId:\"\",address:\"4 Rue du fort Wallis, L-2714, Luxembourg\",address2:\"\",standardAmount:\"2500.00\",standardSubject:\"Strategic Marketing & Content Development\",taxRate:\"0\",hasTax:false},{id:3,name:\"LA HOJA CAPITAL PARTNERS\",taxId:\"\",address:\"Durango 243, Col Roma Norte CDMX, México\",address2:\"\",standardAmount:\"2500.00\",standardSubject:\"Marketing and Strategy Services\",taxRate:\"0\",hasTax:false},{id:4,name:\"THEHORA GLOBAL FAMILY OFFICE INC.\",taxId:\"\",address:\"Suite 5, Horsford´s Business Center, Long Point Road, Nevis\",address2:\"\",standardAmount:\"325.00\",standardSubject:\"Strategic Executive Positioning of Jaume Horrach Pons\",taxRate:\"0\",hasTax:false},{id:5,name:\"PAMPA CAPITAL ASSET MANAGEMENT\",taxId:\"30717987213\",address:\"Ortiz de Ocampo 3302, Modulo 3, Oficina 4, CABA, Argentina\",address2:\"\",standardAmount:\"1500.00\",standardSubject:\"Zinnia Essential Plan :: Pampa Capital\",taxRate:\"0\",hasTax:false},{id:6,name:\"BAU ADVISORS LLC\",taxId:\"\",address:\"1200 Brickell Ave - Suite 1950, Miami, FL 33131, US\",address2:\"\",standardAmount:\"900.00\",standardSubject:\"Priority 1 scope\",taxRate:\"0\",hasTax:false},{id:7,name:\"VMEO ADVISORY, S.C.\",taxId:\"VAD200226RS9\",address:\"HEGEL 221 PISO 1 POLANCO, MEXICO\",address2:\"\",standardAmount:\"1500.00\",standardSubject:\"Marketing and Strategy Services\",taxRate:\"0\",hasTax:false}];const[clients,setClients]=useState(preloadedClients);const[selectedClients,setSelectedClients]=useState([]);const[invoiceDate,setInvoiceDate]=useState(new Date().toISOString().split('T')[0]);const[dueDate,setDueDate]=useState('');const[editingClient,setEditingClient]=useState(null);const[showClientForm,setShowClientForm]=useState(false);const[confirmationModal,setConfirmationModal]=useState({isOpen:false,onConfirm:()=>{}});const[clientForm,setClientForm]=useState({name:'',taxId:'',address:'',address2:'',standardAmount:'',standardSubject:'',taxRate:'0',hasTax:false});// Effect to auto-calculate due date\nuseEffect(()=>{if(invoiceDate){const date=new Date(invoiceDate);date.setUTCDate(date.getUTCDate()+15);setDueDate(date.toISOString().split('T')[0]);}},[invoiceDate]);// Client form management\nconst resetClientForm=()=>{setClientForm({name:'',taxId:'',address:'',address2:'',standardAmount:'',standardSubject:'',taxRate:'0',hasTax:false});};const handleSaveClient=()=>{if(editingClient){setClients(clients.map(c=>c.id===editingClient.id?_objectSpread(_objectSpread({},clientForm),{},{id:editingClient.id}):c));setEditingClient(null);}else{const newClient=_objectSpread(_objectSpread({},clientForm),{},{id:Date.now()});setClients([...clients,newClient]);}resetClientForm();setShowClientForm(false);};const handleEditClient=client=>{setClientForm(client);setEditingClient(client);setShowClientForm(true);};const handleDeleteClient=clientId=>{setConfirmationModal({isOpen:true,title:\"Eliminar Cliente\",message:\"¿Estás seguro de que deseas eliminar este cliente? Esta acción no se puede deshacer.\",onConfirm:()=>{setClients(clients.filter(c=>c.id!==clientId));setConfirmationModal({isOpen:false});}});};// Formatting and calculation utilities\nconst formatDate=dateString=>{const date=new Date(dateString);const months=[\"Ene\",\"Feb\",\"Mar\",\"Abr\",\"May\",\"Jun\",\"Jul\",\"Ago\",\"Sep\",\"Oct\",\"Nov\",\"Dic\"];const day=date.getUTCDate();const month=months[date.getUTCMonth()];const year=date.getUTCFullYear();return\"\".concat(day,\" \").concat(month,\", \").concat(year);};const calculateTotals=(subtotalAmount,taxRate,hasTax)=>{const subtotal=parseFloat(subtotalAmount)||0;const tax=hasTax?subtotal*parseFloat(taxRate)/100:0;const total=subtotal+tax;return{subtotal,tax,total};};// Core HTML generation logic\nconst generateInvoiceHTML=()=>{const allInvoicesHTML=selectedClients.map(clientData=>{const client=clients.find(c=>c.id===clientData.clientId);if(!client)return'';const{subtotal,tax,total}=calculateTotals(clientData.subtotalAmount,client.taxRate,client.hasTax);const invoiceNumberForThisClient=clientData.invoiceNumber||'';const formatCurrency=value=>(typeof value==='number'?value:parseFloat(value||0)).toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2});const itemRows=[{description:clientData.itemDetail,quantity:clientData.quantity,rate:clientData.rate},...(clientData.addOns||[])].map(item=>{const amount=parseFloat(item.quantity||1)*parseFloat(item.rate||0);return\"\\n        <tr>\\n            <td align=\\\"left\\\" style=\\\"padding: 10px 0; font-weight: 600; color: #1f2937; font-size: 14px;\\\">\".concat(item.description,\"</td>\\n            <td align=\\\"right\\\" style=\\\"padding: 10px 0; color: #6b7280; font-size: 14px;\\\">\").concat(item.quantity||1,\"</td>\\n            <td align=\\\"right\\\" style=\\\"padding: 10px 0; color: #6b7280; font-size: 14px;\\\">$\").concat(formatCurrency(item.rate),\" USD</td>\\n            <td align=\\\"right\\\" style=\\\"padding: 10px 0; font-weight: 600; color: #1f2937; font-size: 14px;\\\">$\").concat(formatCurrency(amount),\" USD</td>\\n        </tr>\\n        \");}).join('');return\"\\n        <!-- INVOICE START: \".concat(client.name,\" -->\\n        <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\">\\n            <tr><td align=\\\"center\\\" valign=\\\"top\\\">\\n                <div class=\\\"header-box\\\">\\n                    <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\">\\n                        <tr>\\n                            <td align=\\\"left\\\" valign=\\\"bottom\\\" style=\\\"font-size: 12px; color: #6b7280; line-height: 1.4;\\\">\\n                                <h1 style=\\\"font-family: 'Host Grotesk', sans-serif; font-size: 30px; font-weight: 600; color: #1f2937; margin: 0 0 5px 0;\\\">ZINNIA Group LLC</h1>\\n                                <p style=\\\"margin: 0 0 3px 0;\\\">EIN: 98-1826070</p><p style=\\\"margin: 0 0 3px 0;\\\">Financial Expertise</p><p style=\\\"margin: 0 0 3px 0;\\\">Digital Excellence</p><p style=\\\"margin: 0;\\\">Strategic Impact</p>\\n                            </td>\\n                            <td align=\\\"right\\\" valign=\\\"bottom\\\" style=\\\"font-size: 12px; color: #6b7280; line-height: 1.4;\\\">\\n                                <p style=\\\"margin: 0 0 5px 0;\\\">Business Address</p><p style=\\\"margin: 0 0 3px 0;\\\">16192 Coastal Highway, Lewes, DE 19958</p><p style=\\\"margin: 0;\\\">legal@zinniagroup.io</p>\\n                            </td>\\n                        </tr>\\n                    </table>\\n                </div>\\n                <div class=\\\"invoice-container\\\">\\n                    <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\" style=\\\"margin-bottom: 32px;\\\">\\n                        <tr>\\n                            <td width=\\\"66.66%\\\" align=\\\"left\\\" valign=\\\"top\\\">\\n                                <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\">\\n                                    <tr>\\n                                        <td width=\\\"60%\\\" align=\\\"left\\\" valign=\\\"top\\\">\\n                                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 8px 0;\\\">Billed to,</p>\\n                                            <p style=\\\"font-weight: 600; color: #1f2937; margin: 0; font-size: 14px;\\\">\").concat(client.name,\"</p>\\n                                            \").concat(client.taxId?\"<p style=\\\"font-size: 14px; color: #6b7280; margin: 4px 0 0 0;\\\">\".concat(client.taxId,\"</p>\"):'',\"\\n                                        </td>\\n                                        <td width=\\\"40%\\\" align=\\\"left\\\" valign=\\\"top\\\">\\n                                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 8px 0;\\\">Invoice number</p>\\n                                            <p style=\\\"font-weight: 600; color: #1f2937; margin: 0; font-size: 14px;\\\">#ZN-\").concat(invoiceNumberForThisClient,\"</p>\\n                                        </td>\\n                                    </tr>\\n                                    <tr>\\n                                        <td colspan=\\\"2\\\" align=\\\"left\\\" valign=\\\"top\\\" style=\\\"padding-top: 16px;\\\">\\n                                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 8px 0;\\\">Business address</p>\\n                                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0;\\\">\").concat(client.address,\"</p>\\n                                            \").concat(client.address2?\"<p style=\\\"font-size: 14px; color: #6b7280; margin: 4px 0 0 0;\\\">\".concat(client.address2,\"</p>\"):'',\"\\n                                        </td>\\n                                    </tr>\\n                                </table>\\n                            </td>\\n                            <td width=\\\"33.33%\\\" align=\\\"right\\\" valign=\\\"top\\\">\\n                                <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 8px 0;\\\">Invoice of (USD)</p>\\n                                <p style=\\\"font-size: 36px; font-weight: 600; color: #242D4F; margin: 0;\\\">$\").concat(formatCurrency(total),\"</p>\\n                            </td>\\n                        </tr>\\n                    </table>\\n                    <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\" style=\\\"padding-bottom: 16px;\\\">\\n                        <tr>\\n                            <td width=\\\"50%\\\" align=\\\"left\\\" valign=\\\"top\\\">\\n                                <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 8px 0;\\\">Subject</p>\\n                                <p style=\\\"font-weight: 600; color: #1f2937; margin: 0; font-size: 14px;\\\">\").concat(clientData.subject,\"</p>\\n                            </td>\\n                            <td width=\\\"25%\\\" align=\\\"center\\\" valign=\\\"top\\\">\\n                                <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 8px 0;\\\">Invoice date</p>\\n                                <p style=\\\"font-weight: 600; color: #1f2937; margin: 0; font-size: 14px;\\\">\").concat(formatDate(invoiceDate),\"</p>\\n                            </td>\\n                            <td width=\\\"25%\\\" align=\\\"right\\\" valign=\\\"top\\\">\\n                                <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 8px 0;\\\">Due date</p>\\n                                <p style=\\\"font-weight: 600; color: #1f2937; margin: 0; font-size: 14px;\\\">\").concat(formatDate(dueDate),\"</p>\\n                            </td>\\n                        </tr>\\n                    </table>\\n                    <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\" style=\\\"font-size: 14px; margin-top: 32px;\\\">\\n                        <thead style=\\\"border-top: 1px solid #e5e7eb; border-bottom: 1px solid #e5e7eb;\\\">\\n                            <tr>\\n                                <th align=\\\"left\\\" style=\\\"padding: 8px 0; font-weight: 600; text-transform: uppercase; color: #6b7280; font-size: 14px;\\\">Item Detail</th>\\n                                <th align=\\\"right\\\" style=\\\"padding: 8px 0; font-weight: 600; text-transform: uppercase; color: #6b7280; font-size: 14px;\\\">Qty</th>\\n                                <th align=\\\"right\\\" style=\\\"padding: 8px 0; font-weight: 600; text-transform: uppercase; color: #6b7280; font-size: 14px;\\\">Rate</th>\\n                                <th align=\\\"right\\\" style=\\\"padding: 8px 0; font-weight: 600; text-transform: uppercase; color: #6b7280; font-size: 14px;\\\">Amount</th>\\n                            </tr>\\n                        </thead>\\n                        <tbody>\\n                            \").concat(itemRows,\"\\n                            <tr><td colspan=\\\"4\\\" style=\\\"height: 70px;\\\">&nbsp;</td></tr>\\n                        </tbody>\\n                    </table>\\n                    <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\"><tr><td style=\\\"border-top: 1px solid #e5e7eb;\\\"></td></tr></table>\\n                    <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\" style=\\\"margin-top: 16px;\\\">\\n                        <tr><td align=\\\"right\\\" valign=\\\"top\\\">\\n                            <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\" style=\\\"max-width: 288px;\\\">\\n                                <tbody>\\n                                    <tr>\\n                                        <td align=\\\"left\\\" style=\\\"padding: 8px 0; color: #6b7280; font-size: 14px;\\\">Subtotal</td>\\n                                        <td align=\\\"right\\\" style=\\\"padding: 8px 0; font-weight: 600; color: #1f2937; font-size: 14px;\\\">$\").concat(formatCurrency(subtotal),\" USD</td>\\n                                    </tr>\\n                                    <tr>\\n                                        <td align=\\\"left\\\" style=\\\"padding: 8px 0; color: #6b7280; font-size: 14px;\\\">Tax Rate \").concat(client.hasTax?\"(\".concat(client.taxRate,\"%)\"):'',\"</td>\\n                                        <td align=\\\"right\\\" style=\\\"padding: 8px 0; font-weight: 600; color: #1f2937; font-size: 14px;\\\">$\").concat(formatCurrency(tax),\"</td>\\n                                    </tr>\\n                                    <tr style=\\\"border-top: 1px solid #e5e7eb;\\\">\\n                                        <td align=\\\"left\\\" style=\\\"padding-top: 16px; font-weight: 600; color: #1f2937; font-size: 14px;\\\">Total</td>\\n                                        <td align=\\\"right\\\" style=\\\"padding-top: 16px; font-weight: 600; color: #1f2937; font-size: 14px;\\\">$\").concat(formatCurrency(total),\" USD</td>\\n                                    </tr>\\n                                </tbody>\\n                            </table>\\n                        </td></tr>\\n                    </table>\\n                    <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\" style=\\\"margin-top: 48px;\\\">\\n                        <tr><td align=\\\"left\\\" valign=\\\"top\\\">\\n                            <p style=\\\"font-weight: 600; color: #1f2937; margin: 0; font-size: 14px;\\\">Thank you for partnering with Zinnia.</p>\\n                            <p style=\\\"color: #6b7280; margin: 0; font-size: 14px;\\\">This invoice represents our commitment to driving measurable marketing impact for your firm.</p>\\n                        </td></tr>\\n                    </table>\\n                </div>\\n            </td></tr>\\n        </table>\\n        <div class=\\\"page-break\\\"></div>\\n        <!-- BANKING INSTRUCTIONS -->\\n        <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\">\\n            <tr><td align=\\\"center\\\" valign=\\\"top\\\">\\n                <div class=\\\"invoice-container\\\">\\n                    <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\" style=\\\"margin-bottom: 40px;\\\">\\n                        <tr><td align=\\\"left\\\">\\n                            <h2 style=\\\"font-size: 20px; font-weight: 600; color: #1f2937; margin: 0 0 24px 0;\\\">ACH/Domestic Wire Instructions</h2>\\n                            <p style=\\\"font-size: 16px; color: #6b7280; margin: 0 0 16px 0;\\\">Bank details</p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\\\">ACH and Wire routing number: <span style=\\\"color: #1f2937; font-weight: 600;\\\">121145349</span></p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\\\">Account number: <span style=\\\"color: #1f2937; font-weight: 600;\\\">776236290086789</span></p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\\\">Account type: <span style=\\\"color: #1f2937; font-weight: 600;\\\">Business Checking</span></p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\\\">Bank name: <span style=\\\"color: #1f2937; font-weight: 600;\\\">Column NA - BREX</span></p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 24px 0;\\\">Bank address: <span style=\\\"color: #1f2937; font-weight: 600;\\\">1 Letterman Drive Building A, Suite A4-700, San Francisco, CA 94129 - United States</span></p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\\\">Beneficiary name: <span style=\\\"color: #1f2937; font-weight: 600;\\\">Zinnia Group LLC</span></p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\\\">Beneficiary address: <span style=\\\"color: #1f2937; font-weight: 600;\\\">16192 Coastal Hwy, Lewes, DE 19958 - United States</span></p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0;\\\">EIN: <span style=\\\"color: #1f2937; font-weight: 600;\\\">98-1826070</span></p>\\n                        </td></tr>\\n                    </table>\\n                    <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\"><tr><td style=\\\"border-top: 1px solid #e5e7eb;\\\"></td></tr></table>\\n                    <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\" style=\\\"margin-top: 40px;\\\">\\n                        <tr><td align=\\\"left\\\">\\n                            <h2 style=\\\"font-size: 20px; font-weight: 600; color: #1f2937; margin: 0 0 24px 0;\\\">International Wire Instructions</h2>\\n                            <p style=\\\"font-size: 16px; font-weight: 600; color: #1f2937; margin: 0 0 16px 0;\\\">Step 1 - Enter beneficiary bank information</p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\\\">SWIFT/BIC Code: <span style=\\\"color: #1f2937; font-weight: 600;\\\">CLNOUS66BRX</span></p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\\\">Bank Name: <span style=\\\"color: #1f2937; font-weight: 600;\\\">Column NA - Brex</span></p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 24px 0;\\\">Bank Address: <span style=\\\"color: #1f2937; font-weight: 600;\\\">1 Letterman Drive Building A, Suite A4-700, San Francisco, CA 94129</span></p>\\n                            <p style=\\\"font-size: 16px; font-weight: 600; color: #1f2937; margin: 0 0 16px 0;\\\">Step 2 - Enter Intermediary bank information</p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\\\">SWIFT/BIC code: <span style=\\\"color: #1f2937; font-weight: 600;\\\">CHASUS33</span></p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\\\">Bank name: <span style=\\\"color: #1f2937; font-weight: 600;\\\">JPMorgan Chase Bank N.A.</span></p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 24px 0;\\\">Bank address: <span style=\\\"color: #1f2937; font-weight: 600;\\\">383 Madison Avenue, New York, NY 10179</span></p>\\n                            <p style=\\\"font-size: 16px; font-weight: 600; color: #1f2937; margin: 0 0 16px 0;\\\">Step 3 - Enter beneficiary information</p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\\\">Beneficiary name: <span style=\\\"color: #1f2937; font-weight: 600;\\\">Zinnia Group LLC</span></p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\\\">Beneficiary account number: <span style=\\\"color: #1f2937; font-weight: 600;\\\">776236290086789</span></p>\\n                            <p style=\\\"font-size: 14px; color: #6b7280; margin: 0;\\\">Beneficiary address: <span style=\\\"color: #1f2937; font-weight: 600;\\\">16192 Coastal Hwy, Lewes, DE 19958</span></p>\\n                        </td></tr>\\n                    </table>\\n                </div>\\n                <div class=\\\"footer-container\\\">\\n                    <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" width=\\\"100%\\\">\\n                        <tr><td align=\\\"left\\\" style=\\\"font-size: 14px; color: #ffffff; line-height: 1.5;\\\">\\n                            <p style=\\\"font-weight: 400; margin: 0 0 8px 0;\\\">Terms & Conditions</p>\\n                            <p style=\\\"margin: 0;\\\">Please pay within net 15 days of receiving this invoice.</p>\\n                            <p style=\\\"margin: 0;\\\">Invoices not paid within 30 days are subject to a 1.5% monthly finance charge</p>\\n                        </td></tr>\\n                    </table>\\n                </div>\\n            </td></tr>\\n        </table>\\n        <!-- INVOICE END -->\\n      \");}).join('<div class=\"page-break\"></div>');return\"\\n      <!DOCTYPE html>\\n      <html lang=\\\"es\\\">\\n      <head>\\n        <meta charset=\\\"UTF-8\\\"><meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n        <title>Zinnia Invoices</title>\\n        <!--[if !mso]><!-->\\n        <link rel=\\\"preconnect\\\" href=\\\"https://fonts.googleapis.com\\\">\\n        <link rel=\\\"preconnect\\\" href=\\\"https://fonts.gstatic.com\\\" crossorigin>\\n        <link href=\\\"https://fonts.googleapis.com/css2?family=Host+Grotesk:wght@600&family=Inter:wght@400;600&display=swap\\\" rel=\\\"stylesheet\\\">\\n        <!--<![endif]-->\\n        <style>\\n            body, table, td, a { -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }\\n            table, td { mso-table-lspace: 0pt; mso-table-rspace: 0pt; }\\n            img { -ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }\\n            table { border-collapse: collapse !important; }\\n            body { background-color: #ffffff; height: 100% !important; margin: 0 !important; padding: 40px 20px !important; width: 100% !important; font-family: 'Inter', sans-serif; font-weight: 400; }\\n            .invoice-container, .header-box { max-width: 800px; margin: 0 auto; background: #f2f3f1; border-radius: 12px; padding: 40px 24px; border: 1px solid #d7dae0; }\\n            .header-box { margin-bottom: 20px; padding: 32px 24px; }\\n            .footer-container { max-width: 800px; margin: 20px auto 0 auto; background: #242D4F; border-radius: 12px; padding: 32px 24px; }\\n            .page-break { page-break-before: always; margin-top: 40px; }\\n            @media print {\\n                .page-break { page-break-before: always; margin-top: 0; }\\n                body { padding: 0 !important; background-color: #ffffff !important; }\\n                .invoice-container, .header-box { background-color: #f2f3f1 !important; -webkit-print-color-adjust: exact; color-adjust: exact; }\\n                .footer-container { background-color: #242D4F !important; -webkit-print-color-adjust: exact; color-adjust: exact; }\\n            }\\n        </style>\\n      </head>\\n      <body>\".concat(allInvoicesHTML,\"</body>\\n      </html>\\n    \");};const generateAndDownloadHTML=()=>{setIsGenerating(true);setTimeout(()=>{const htmlContent=generateInvoiceHTML();const invoiceDateFormatted=new Date(invoiceDate).toISOString().split('T')[0];const filename=\"Zinnia-Invoices-\".concat(invoiceDateFormatted,\".html\");const blob=new Blob([htmlContent],{type:'text/html'});const link=document.createElement('a');link.href=URL.createObjectURL(blob);link.download=filename;document.body.appendChild(link);link.click();document.body.removeChild(link);URL.revokeObjectURL(link.href);setIsGenerating(false);},100);};const generateAndPrintHTML=()=>{setIsGenerating(true);setTimeout(()=>{const htmlContent=generateInvoiceHTML();const printWindow=window.open('','_blank');if(printWindow){printWindow.document.write(htmlContent);printWindow.document.close();printWindow.focus();printWindow.print();}else{console.error(\"La ventana emergente para impresión fue bloqueada por el navegador.\");}setIsGenerating(false);},150);};const recalculateSubtotal=invoiceData=>{const baseAmount=(parseFloat(invoiceData.rate)||0)*(parseFloat(invoiceData.quantity)||1);const addOnsTotal=(invoiceData.addOns||[]).reduce((sum,addon)=>sum+parseFloat(addon.rate||0)*parseFloat(addon.quantity||1),0);invoiceData.subtotalAmount=(baseAmount+addOnsTotal).toString();};const addSelectedClient=()=>{const firstClient=clients[0];if(!firstClient)return;setSelectedClients([...selectedClients,{clientId:firstClient.id,invoiceNumber:'',subject:\"Marketing and Strategy Services\",itemDetail:firstClient.standardSubject,quantity:'1',rate:firstClient.standardAmount,subtotalAmount:firstClient.standardAmount,addOns:[]}]);};const updateSelectedClient=(index,field,value)=>{const updated=[...selectedClients];const currentInvoice=updated[index];if(field==='clientId'){value=parseInt(value);}currentInvoice[field]=value;if(field==='clientId'){const newClient=clients.find(c=>c.id===value);if(newClient){currentInvoice.subject=\"Marketing and Strategy Services\";currentInvoice.itemDetail=newClient.standardSubject;currentInvoice.rate=newClient.standardAmount;}}recalculateSubtotal(currentInvoice);setSelectedClients(updated);};const removeSelectedClient=index=>{setSelectedClients(selectedClients.filter((_,i)=>i!==index));};const addAddOn=clientIndex=>{const updated=[...selectedClients];if(!updated[clientIndex].addOns)updated[clientIndex].addOns=[];updated[clientIndex].addOns.push({description:'',rate:'',quantity:'1'});setSelectedClients(updated);};const updateAddOn=(clientIndex,addonIndex,field,value)=>{const updated=[...selectedClients];updated[clientIndex].addOns[addonIndex][field]=value;recalculateSubtotal(updated[clientIndex]);setSelectedClients(updated);};const removeAddOn=(clientIndex,addonIndex)=>{const updated=[...selectedClients];updated[clientIndex].addOns.splice(addonIndex,1);recalculateSubtotal(updated[clientIndex]);setSelectedClients(updated);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ConfirmationModal,{isOpen:confirmationModal.isOpen,onClose:()=>setConfirmationModal({isOpen:false}),onConfirm:confirmationModal.onConfirm,title:confirmationModal.title,children:confirmationModal.message}),/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 p-6\",style:{backgroundColor:'#f2f3f1',fontFamily:'Aptos, sans-serif'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6 mb-6\",style:{borderColor:'#ebecea'},children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",style:{color:'#242d4f'},children:\"Invoice Automation\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1\",style:{color:'#000000'},children:\"Zinnia Group LLC\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border mb-6\",style:{borderColor:'#ebecea'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex border-b\",style:{borderColor:'#ebecea'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('generate'),className:\"px-6 py-3 font-medium text-sm flex items-center gap-2 \".concat(activeTab==='generate'?'border-b-2':'hover:opacity-80'),style:{color:activeTab==='generate'?'#242d4f':'#ccbea7',borderBottomColor:activeTab==='generate'?'#dff266':'transparent',backgroundColor:activeTab==='generate'?'rgba(223, 242, 102, 0.1)':'transparent'},children:[/*#__PURE__*/_jsx(FileText,{size:16}),\" Generar invoice\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('clients'),className:\"px-6 py-3 font-medium text-sm flex items-center gap-2 \".concat(activeTab==='clients'?'border-b-2':'hover:opacity-80'),style:{color:activeTab==='clients'?'#242d4f':'#ccbea7',borderBottomColor:activeTab==='clients'?'#dff266':'transparent',backgroundColor:activeTab==='clients'?'rgba(223, 242, 102, 0.1)':'transparent'},children:[/*#__PURE__*/_jsx(Users,{size:16}),\" Gestionar clientes (\",clients.length,\")\"]})]}),activeTab==='generate'&&/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:clients.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Primero, a\\xF1ade clientes en la pesta\\xF1a \\\"Gestionar clientes\\\".\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2\",style:{color:'#242d4f'},children:\"Invoice date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:invoiceDate,onChange:e=>setInvoiceDate(e.target.value),className:\"w-full px-3 py-2 border rounded-md\",style:{borderColor:'#ebecea'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2\",style:{color:'#242d4f'},children:\"Due date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:dueDate,onChange:e=>setDueDate(e.target.value),className:\"w-full px-3 py-2 border rounded-md\",style:{borderColor:'#ebecea'}})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium\",style:{color:'#242d4f'},children:\"Cliente a facturar\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:addSelectedClient,className:\"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md\",style:{backgroundColor:'#dff266',color:'#242d4f'},children:[/*#__PURE__*/_jsx(Plus,{className:\"mr-1 h-4 w-4\"}),\" Agregar cliente\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:selectedClients.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:selectedClients.map((selectedClient,index)=>{const client=clients.find(c=>c.id===selectedClient.clientId);const{total}=client?calculateTotals(selectedClient.subtotalAmount,client.taxRate,client.hasTax):{total:0};return/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4 bg-gray-50\",style:{borderColor:'#ebecea'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium text-gray-900\",children:[\"Invoice para \",(client===null||client===void 0?void 0:client.name)||'cliente']}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeSelectedClient(index),className:\"text-red-600 hover:text-red-800\",children:/*#__PURE__*/_jsx(Trash2,{size:16})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Billed to\"}),/*#__PURE__*/_jsx(\"select\",{value:selectedClient.clientId,onChange:e=>updateSelectedClient(index,'clientId',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md\",children:clients.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c.id,children:c.name},c.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Invoice number\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 pr-2\",children:\"#ZN-\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedClient.invoiceNumber,onChange:e=>updateSelectedClient(index,'invoiceNumber',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md\",placeholder:\"ej: 43\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Subject\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedClient.subject,onChange:e=>updateSelectedClient(index,'subject',e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 border-t pt-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-md font-medium text-gray-800 mb-2\",children:\"Detalles del invoice\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-12 gap-2 items-end mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-medium text-gray-500\",children:\"Item Detail\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:selectedClient.itemDetail,onChange:e=>updateSelectedClient(index,'itemDetail',e.target.value),className:\"w-full px-2 py-1 border border-gray-300 rounded-md text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-medium text-gray-500\",children:\"Qty\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:selectedClient.quantity,onChange:e=>updateSelectedClient(index,'quantity',e.target.value),className:\"w-full px-2 py-1 border border-gray-300 rounded-md text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-medium text-gray-500\",children:\"Rate\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:selectedClient.rate,onChange:e=>updateSelectedClient(index,'rate',e.target.value),className:\"w-full px-2 py-1 border border-gray-300 rounded-md text-sm\"})]})]}),selectedClient.addOns.map((addon,addonIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-12 gap-2 items-end mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-span-6\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Descripci\\xF3n del \\xEDtem adicional\",value:addon.description,onChange:e=>updateAddOn(index,addonIndex,'description',e.target.value),className:\"w-full px-2 py-1 border border-gray-300 rounded-md text-sm\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"1\",value:addon.quantity,onChange:e=>updateAddOn(index,addonIndex,'quantity',e.target.value),className:\"w-full px-2 py-1 border border-gray-300 rounded-md text-sm\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",placeholder:\"0.00\",value:addon.rate,onChange:e=>updateAddOn(index,addonIndex,'rate',e.target.value),className:\"w-full px-2 py-1 border border-gray-300 rounded-md text-sm\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-span-1\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeAddOn(index,addonIndex),className:\"text-red-500 hover:text-red-700 p-1\",children:/*#__PURE__*/_jsx(X,{size:16})})})]},addonIndex)),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>addAddOn(index),className:\"text-sm text-blue-600 hover:text-blue-800 font-medium mt-2\",children:[/*#__PURE__*/_jsx(Plus,{size:14,className:\"inline mr-1\"}),\"A\\xF1adir \\xCDtem\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-3 bg-blue-50 rounded-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-blue-900\",children:\"Amount:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-bold text-blue-900\",children:[\"$\",total.toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2}),\" USD\"]})]})})]},index);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 px-6 border-2 border-dashed rounded-lg\",style:{borderColor:'#ccbea7'},children:[/*#__PURE__*/_jsx(Clock,{className:\"mx-auto h-12 w-12\",style:{color:'#ccbea7'}}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-lg font-medium\",style:{color:'#ccbea7'},children:\"No hay clientes seleccionados\"})]})})]}),selectedClients.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"border-t pt-6 mt-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:generateAndPrintHTML,disabled:isGenerating,className:\"inline-flex items-center justify-center px-6 py-3 border border-gray-300 text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed\",children:[isGenerating?/*#__PURE__*/_jsx(Loader,{className:\"animate-spin mr-2 h-5 w-5\"}):/*#__PURE__*/_jsx(Printer,{className:\"mr-2 h-5 w-5\"}),\"Imprimir HTML\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:generateAndDownloadHTML,disabled:isGenerating,className:\"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white transition-all hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed\",style:{backgroundColor:'#242d4f',color:'#ffffff'},children:[isGenerating?/*#__PURE__*/_jsx(Loader,{className:\"animate-spin mr-2 h-5 w-5\"}):/*#__PURE__*/_jsx(Download,{className:\"mr-2 h-5 w-5\"}),\"Descargar HTML\"]})]})})]})}),activeTab==='clients'&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium\",style:{color:'#242d4f'},children:\"Gestionar clientes\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{resetClientForm();setEditingClient(null);setShowClientForm(true);},className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white\",style:{backgroundColor:'#242d4f'},children:[/*#__PURE__*/_jsx(Plus,{className:\"mr-2 h-4 w-4\"}),\" Nuevo Cliente\"]})]}),showClientForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 border border-gray-200 rounded-lg p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:editingClient?'Editar Cliente':'Nuevo Cliente'}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Nombre del Cliente *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:clientForm.name,onChange:e=>setClientForm(_objectSpread(_objectSpread({},clientForm),{},{name:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md\",placeholder:\"Nombre de la Empresa\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"NIF (opcional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:clientForm.taxId,onChange:e=>setClientForm(_objectSpread(_objectSpread({},clientForm),{},{taxId:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md\",placeholder:\"ej: NIF\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Direcci\\xF3n L\\xEDnea 1 *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:clientForm.address,onChange:e=>setClientForm(_objectSpread(_objectSpread({},clientForm),{},{address:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md\",placeholder:\"Direcci\\xF3n principal\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Direcci\\xF3n L\\xEDnea 2 (opcional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:clientForm.address2,onChange:e=>setClientForm(_objectSpread(_objectSpread({},clientForm),{},{address2:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md\",placeholder:\"Piso, apartamento, etc.\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Importe Est\\xE1ndar *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:clientForm.standardAmount,onChange:e=>setClientForm(_objectSpread(_objectSpread({},clientForm),{},{standardAmount:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md\",placeholder:\"0.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Detalle del \\xCDtem Est\\xE1ndar *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:clientForm.standardSubject,onChange:e=>setClientForm(_objectSpread(_objectSpread({},clientForm),{},{standardSubject:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md\",placeholder:\"Descripci\\xF3n del servicio\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2 grid grid-cols-2 gap-4 items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Tasa de Impuesto (%)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:clientForm.taxRate,onChange:e=>setClientForm(_objectSpread(_objectSpread({},clientForm),{},{taxRate:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-md disabled:bg-gray-200\",placeholder:\"0.00\",disabled:!clientForm.hasTax})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end h-full pb-2\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 text-sm font-medium text-gray-700\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:clientForm.hasTax,onChange:e=>setClientForm(_objectSpread(_objectSpread({},clientForm),{},{hasTax:e.target.checked})),className:\"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"}),\"Aplica Impuesto\"]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-3 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowClientForm(false),className:\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50\",children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSaveClient,disabled:!clientForm.name||!clientForm.address||!clientForm.standardAmount||!clientForm.standardSubject,className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400\",children:[/*#__PURE__*/_jsx(Save,{className:\"mr-2 h-4 w-4 inline\"}),\" \",editingClient?'Actualizar':'Guardar',\" Cliente\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-4\",children:clients.map(client=>/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900\",children:client.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditClient(client),className:\"text-blue-600 hover:text-blue-800\",children:/*#__PURE__*/_jsx(Edit2,{size:16})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteClient(client.id),className:\"text-red-600 hover:text-red-800\",children:/*#__PURE__*/_jsx(Trash2,{size:16})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm text-gray-600\",children:[client.taxId&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"NIF:\"}),\" \",client.taxId]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Direcci\\xF3n:\"}),\" \",client.address]}),client.address2&&/*#__PURE__*/_jsx(\"p\",{children:client.address2}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Importe Est.:\"}),\" $\",parseFloat(client.standardAmount).toFixed(2),\" USD\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Detalle Est.:\"}),\" \",client.standardSubject]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Tasa Imp.:\"}),\" \",client.hasTax?\"\".concat(client.taxRate,\"%\"):'N/A']})]})]},client.id))})]})]})]})})]});};export default ZinniaInvoiceGenerator;","map":{"version":3,"names":["React","useState","useEffect","Download","Plus","Edit2","Trash2","Save","X","FileText","Users","Calendar","Loader","AlertTriangle","Printer","Clock","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ConfirmationModal","_ref","isOpen","onClose","onConfirm","title","children","className","type","onClick","ZinniaInvoiceGenerator","activeTab","setActiveTab","isGenerating","setIsGenerating","preloadedClients","id","name","taxId","address","address2","standardAmount","standardSubject","taxRate","hasTax","clients","setClients","selectedClients","setSelectedClients","invoiceDate","setInvoiceDate","Date","toISOString","split","dueDate","setDueDate","editingClient","setEditingClient","showClientForm","setShowClientForm","confirmationModal","setConfirmationModal","clientForm","setClientForm","date","setUTCDate","getUTCDate","resetClientForm","handleSaveClient","map","c","_objectSpread","newClient","now","handleEditClient","client","handleDeleteClient","clientId","message","filter","formatDate","dateString","months","day","month","getUTCMonth","year","getUTCFullYear","concat","calculateTotals","subtotalAmount","subtotal","parseFloat","tax","total","generateInvoiceHTML","allInvoicesHTML","clientData","find","invoiceNumberForThisClient","invoiceNumber","formatCurrency","value","toLocaleString","minimumFractionDigits","maximumFractionDigits","itemRows","description","itemDetail","quantity","rate","addOns","item","amount","join","subject","generateAndDownloadHTML","setTimeout","htmlContent","invoiceDateFormatted","filename","blob","Blob","link","document","createElement","href","URL","createObjectURL","download","body","appendChild","click","removeChild","revokeObjectURL","generateAndPrintHTML","printWindow","window","open","write","close","focus","print","console","error","recalculateSubtotal","invoiceData","baseAmount","addOnsTotal","reduce","sum","addon","toString","addSelectedClient","firstClient","updateSelectedClient","index","field","updated","currentInvoice","parseInt","removeSelectedClient","_","i","addAddOn","clientIndex","push","updateAddOn","addonIndex","removeAddOn","splice","style","backgroundColor","fontFamily","borderColor","color","borderBottomColor","size","length","onChange","e","target","selectedClient","placeholder","step","disabled","checked","toFixed"],"sources":["/Users/ferraz/AutoInvoice/src/components/ZinniaInvoiceGenerator.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Download, Plus, Edit2, Trash2, Save, X, FileText, Users, Calendar, Loader, AlertTriangle, Printer, Clock } from 'lucide-react';\n\n// A simple, reusable modal component for confirmations\nconst ConfirmationModal = ({ isOpen, onClose, onConfirm, title, children }) => {\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50\">\n      <div className=\"bg-white rounded-lg shadow-xl p-6 w-full max-w-md\">\n        <div className=\"flex items-start\">\n          <div className=\"mr-4 flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:h-10 sm:w-10\">\n            <AlertTriangle className=\"h-6 w-6 text-red-600\" />\n          </div>\n          <div className=\"flex-1\">\n            <h3 className=\"text-lg font-medium text-gray-900\">{title}</h3>\n            <div className=\"mt-2\">\n              <p className=\"text-sm text-gray-500\">{children}</p>\n            </div>\n          </div>\n        </div>\n        <div className=\"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse\">\n          <button\n            type=\"button\"\n            className=\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 sm:ml-3 sm:w-auto sm:text-sm\"\n            onClick={onConfirm}\n          >\n            Confirmar\n          </button>\n          <button\n            type=\"button\"\n            className=\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm\"\n            onClick={onClose}\n          >\n            Cancelar\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n\n// Componente principal del generador de facturas\nconst ZinniaInvoiceGenerator = () => {\n  const [activeTab, setActiveTab] = useState('generate');\n  const [isGenerating, setIsGenerating] = useState(false);\n\n  // Preloaded client list\n  const preloadedClients = [\n    { id: 1, name: \"FEK MANAGEMENT SPAIN SL\", taxId: \"B75822965\", address: \"Calle Camino del Ancho 2, Pta. 45, 28109, Alcobendas, Madrid, España\", address2: \"\", standardAmount: \"2500.00\", standardSubject: \"Marketing and Strategy Services\", taxRate: \"0\", hasTax: false },\n    { id: 2, name: \"ESTATING OPERATIONS LUXEMBOURG SARL\", taxId: \"\", address: \"4 Rue du fort Wallis, L-2714, Luxembourg\", address2: \"\", standardAmount: \"2500.00\", standardSubject: \"Strategic Marketing & Content Development\", taxRate: \"0\", hasTax: false },\n    { id: 3, name: \"LA HOJA CAPITAL PARTNERS\", taxId: \"\", address: \"Durango 243, Col Roma Norte CDMX, México\", address2: \"\", standardAmount: \"2500.00\", standardSubject: \"Marketing and Strategy Services\", taxRate: \"0\", hasTax: false },\n    { id: 4, name: \"THEHORA GLOBAL FAMILY OFFICE INC.\", taxId: \"\", address: \"Suite 5, Horsford´s Business Center, Long Point Road, Nevis\", address2: \"\", standardAmount: \"325.00\", standardSubject: \"Strategic Executive Positioning of Jaume Horrach Pons\", taxRate: \"0\", hasTax: false },\n    { id: 5, name: \"PAMPA CAPITAL ASSET MANAGEMENT\", taxId: \"30717987213\", address: \"Ortiz de Ocampo 3302, Modulo 3, Oficina 4, CABA, Argentina\", address2: \"\", standardAmount: \"1500.00\", standardSubject: \"Zinnia Essential Plan :: Pampa Capital\", taxRate: \"0\", hasTax: false },\n    { id: 6, name: \"BAU ADVISORS LLC\", taxId: \"\", address: \"1200 Brickell Ave - Suite 1950, Miami, FL 33131, US\", address2: \"\", standardAmount: \"900.00\", standardSubject: \"Priority 1 scope\", taxRate: \"0\", hasTax: false },\n    { id: 7, name: \"VMEO ADVISORY, S.C.\", taxId: \"VAD200226RS9\", address: \"HEGEL 221 PISO 1 POLANCO, MEXICO\", address2: \"\", standardAmount: \"1500.00\", standardSubject: \"Marketing and Strategy Services\", taxRate: \"0\", hasTax: false }\n  ];\n\n  const [clients, setClients] = useState(preloadedClients);\n  const [selectedClients, setSelectedClients] = useState([]);\n  const [invoiceDate, setInvoiceDate] = useState(new Date().toISOString().split('T')[0]);\n  const [dueDate, setDueDate] = useState('');\n  const [editingClient, setEditingClient] = useState(null);\n  const [showClientForm, setShowClientForm] = useState(false);\n  const [confirmationModal, setConfirmationModal] = useState({ isOpen: false, onConfirm: () => {} });\n\n  const [clientForm, setClientForm] = useState({\n    name: '', taxId: '', address: '', address2: '',\n    standardAmount: '', standardSubject: '', taxRate: '0', hasTax: false\n  });\n\n  // Effect to auto-calculate due date\n  useEffect(() => {\n    if (invoiceDate) {\n      const date = new Date(invoiceDate);\n      date.setUTCDate(date.getUTCDate() + 15);\n      setDueDate(date.toISOString().split('T')[0]);\n    }\n  }, [invoiceDate]);\n\n  // Client form management\n  const resetClientForm = () => {\n    setClientForm({\n      name: '', taxId: '', address: '', address2: '',\n      standardAmount: '', standardSubject: '', taxRate: '0', hasTax: false\n    });\n  };\n\n  const handleSaveClient = () => {\n    if (editingClient) {\n      setClients(clients.map(c => c.id === editingClient.id ? {...clientForm, id: editingClient.id} : c));\n      setEditingClient(null);\n    } else {\n      const newClient = {...clientForm, id: Date.now()};\n      setClients([...clients, newClient]);\n    }\n    resetClientForm();\n    setShowClientForm(false);\n  };\n\n  const handleEditClient = (client) => {\n    setClientForm(client);\n    setEditingClient(client);\n    setShowClientForm(true);\n  };\n\n  const handleDeleteClient = (clientId) => {\n    setConfirmationModal({\n        isOpen: true,\n        title: \"Eliminar Cliente\",\n        message: \"¿Estás seguro de que deseas eliminar este cliente? Esta acción no se puede deshacer.\",\n        onConfirm: () => {\n            setClients(clients.filter(c => c.id !== clientId));\n            setConfirmationModal({ isOpen: false });\n        }\n    });\n  };\n  \n  // Formatting and calculation utilities\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    const months = [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sep\", \"Oct\", \"Nov\", \"Dic\"];\n    const day = date.getUTCDate();\n    const month = months[date.getUTCMonth()];\n    const year = date.getUTCFullYear();\n    return `${day} ${month}, ${year}`;\n  };\n\n  const calculateTotals = (subtotalAmount, taxRate, hasTax) => {\n    const subtotal = parseFloat(subtotalAmount) || 0;\n    const tax = hasTax ? (subtotal * parseFloat(taxRate) / 100) : 0;\n    const total = subtotal + tax;\n    return { subtotal, tax, total };\n  };\n  \n  // Core HTML generation logic\n  const generateInvoiceHTML = () => {\n    const allInvoicesHTML = selectedClients.map(clientData => {\n      const client = clients.find(c => c.id === clientData.clientId);\n      if (!client) return '';\n\n      const { subtotal, tax, total } = calculateTotals(\n        clientData.subtotalAmount, client.taxRate, client.hasTax\n      );\n      \n      const invoiceNumberForThisClient = clientData.invoiceNumber || '';\n      const formatCurrency = (value) => (typeof value === 'number' ? value : parseFloat(value || 0)).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });\n      \n      const itemRows = [\n        { description: clientData.itemDetail, quantity: clientData.quantity, rate: clientData.rate },\n        ...(clientData.addOns || [])\n      ].map(item => {\n        const amount = (parseFloat(item.quantity || 1)) * (parseFloat(item.rate || 0));\n        return `\n        <tr>\n            <td align=\"left\" style=\"padding: 10px 0; font-weight: 600; color: #1f2937; font-size: 14px;\">${item.description}</td>\n            <td align=\"right\" style=\"padding: 10px 0; color: #6b7280; font-size: 14px;\">${item.quantity || 1}</td>\n            <td align=\"right\" style=\"padding: 10px 0; color: #6b7280; font-size: 14px;\">$${formatCurrency(item.rate)} USD</td>\n            <td align=\"right\" style=\"padding: 10px 0; font-weight: 600; color: #1f2937; font-size: 14px;\">$${formatCurrency(amount)} USD</td>\n        </tr>\n        `;\n      }).join('');\n\n      return `\n        <!-- INVOICE START: ${client.name} -->\n        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n            <tr><td align=\"center\" valign=\"top\">\n                <div class=\"header-box\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                        <tr>\n                            <td align=\"left\" valign=\"bottom\" style=\"font-size: 12px; color: #6b7280; line-height: 1.4;\">\n                                <h1 style=\"font-family: 'Host Grotesk', sans-serif; font-size: 30px; font-weight: 600; color: #1f2937; margin: 0 0 5px 0;\">ZINNIA Group LLC</h1>\n                                <p style=\"margin: 0 0 3px 0;\">EIN: 98-1826070</p><p style=\"margin: 0 0 3px 0;\">Financial Expertise</p><p style=\"margin: 0 0 3px 0;\">Digital Excellence</p><p style=\"margin: 0;\">Strategic Impact</p>\n                            </td>\n                            <td align=\"right\" valign=\"bottom\" style=\"font-size: 12px; color: #6b7280; line-height: 1.4;\">\n                                <p style=\"margin: 0 0 5px 0;\">Business Address</p><p style=\"margin: 0 0 3px 0;\">16192 Coastal Highway, Lewes, DE 19958</p><p style=\"margin: 0;\">legal@zinniagroup.io</p>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n                <div class=\"invoice-container\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"margin-bottom: 32px;\">\n                        <tr>\n                            <td width=\"66.66%\" align=\"left\" valign=\"top\">\n                                <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                                    <tr>\n                                        <td width=\"60%\" align=\"left\" valign=\"top\">\n                                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 8px 0;\">Billed to,</p>\n                                            <p style=\"font-weight: 600; color: #1f2937; margin: 0; font-size: 14px;\">${client.name}</p>\n                                            ${client.taxId ? `<p style=\"font-size: 14px; color: #6b7280; margin: 4px 0 0 0;\">${client.taxId}</p>` : ''}\n                                        </td>\n                                        <td width=\"40%\" align=\"left\" valign=\"top\">\n                                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 8px 0;\">Invoice number</p>\n                                            <p style=\"font-weight: 600; color: #1f2937; margin: 0; font-size: 14px;\">#ZN-${invoiceNumberForThisClient}</p>\n                                        </td>\n                                    </tr>\n                                    <tr>\n                                        <td colspan=\"2\" align=\"left\" valign=\"top\" style=\"padding-top: 16px;\">\n                                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 8px 0;\">Business address</p>\n                                            <p style=\"font-size: 14px; color: #6b7280; margin: 0;\">${client.address}</p>\n                                            ${client.address2 ? `<p style=\"font-size: 14px; color: #6b7280; margin: 4px 0 0 0;\">${client.address2}</p>` : ''}\n                                        </td>\n                                    </tr>\n                                </table>\n                            </td>\n                            <td width=\"33.33%\" align=\"right\" valign=\"top\">\n                                <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 8px 0;\">Invoice of (USD)</p>\n                                <p style=\"font-size: 36px; font-weight: 600; color: #242D4F; margin: 0;\">$${formatCurrency(total)}</p>\n                            </td>\n                        </tr>\n                    </table>\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"padding-bottom: 16px;\">\n                        <tr>\n                            <td width=\"50%\" align=\"left\" valign=\"top\">\n                                <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 8px 0;\">Subject</p>\n                                <p style=\"font-weight: 600; color: #1f2937; margin: 0; font-size: 14px;\">${clientData.subject}</p>\n                            </td>\n                            <td width=\"25%\" align=\"center\" valign=\"top\">\n                                <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 8px 0;\">Invoice date</p>\n                                <p style=\"font-weight: 600; color: #1f2937; margin: 0; font-size: 14px;\">${formatDate(invoiceDate)}</p>\n                            </td>\n                            <td width=\"25%\" align=\"right\" valign=\"top\">\n                                <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 8px 0;\">Due date</p>\n                                <p style=\"font-weight: 600; color: #1f2937; margin: 0; font-size: 14px;\">${formatDate(dueDate)}</p>\n                            </td>\n                        </tr>\n                    </table>\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"font-size: 14px; margin-top: 32px;\">\n                        <thead style=\"border-top: 1px solid #e5e7eb; border-bottom: 1px solid #e5e7eb;\">\n                            <tr>\n                                <th align=\"left\" style=\"padding: 8px 0; font-weight: 600; text-transform: uppercase; color: #6b7280; font-size: 14px;\">Item Detail</th>\n                                <th align=\"right\" style=\"padding: 8px 0; font-weight: 600; text-transform: uppercase; color: #6b7280; font-size: 14px;\">Qty</th>\n                                <th align=\"right\" style=\"padding: 8px 0; font-weight: 600; text-transform: uppercase; color: #6b7280; font-size: 14px;\">Rate</th>\n                                <th align=\"right\" style=\"padding: 8px 0; font-weight: 600; text-transform: uppercase; color: #6b7280; font-size: 14px;\">Amount</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${itemRows}\n                            <tr><td colspan=\"4\" style=\"height: 70px;\">&nbsp;</td></tr>\n                        </tbody>\n                    </table>\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\"><tr><td style=\"border-top: 1px solid #e5e7eb;\"></td></tr></table>\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"margin-top: 16px;\">\n                        <tr><td align=\"right\" valign=\"top\">\n                            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"max-width: 288px;\">\n                                <tbody>\n                                    <tr>\n                                        <td align=\"left\" style=\"padding: 8px 0; color: #6b7280; font-size: 14px;\">Subtotal</td>\n                                        <td align=\"right\" style=\"padding: 8px 0; font-weight: 600; color: #1f2937; font-size: 14px;\">$${formatCurrency(subtotal)} USD</td>\n                                    </tr>\n                                    <tr>\n                                        <td align=\"left\" style=\"padding: 8px 0; color: #6b7280; font-size: 14px;\">Tax Rate ${client.hasTax ? `(${client.taxRate}%)` : ''}</td>\n                                        <td align=\"right\" style=\"padding: 8px 0; font-weight: 600; color: #1f2937; font-size: 14px;\">$${formatCurrency(tax)}</td>\n                                    </tr>\n                                    <tr style=\"border-top: 1px solid #e5e7eb;\">\n                                        <td align=\"left\" style=\"padding-top: 16px; font-weight: 600; color: #1f2937; font-size: 14px;\">Total</td>\n                                        <td align=\"right\" style=\"padding-top: 16px; font-weight: 600; color: #1f2937; font-size: 14px;\">$${formatCurrency(total)} USD</td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </td></tr>\n                    </table>\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"margin-top: 48px;\">\n                        <tr><td align=\"left\" valign=\"top\">\n                            <p style=\"font-weight: 600; color: #1f2937; margin: 0; font-size: 14px;\">Thank you for partnering with Zinnia.</p>\n                            <p style=\"color: #6b7280; margin: 0; font-size: 14px;\">This invoice represents our commitment to driving measurable marketing impact for your firm.</p>\n                        </td></tr>\n                    </table>\n                </div>\n            </td></tr>\n        </table>\n        <div class=\"page-break\"></div>\n        <!-- BANKING INSTRUCTIONS -->\n        <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n            <tr><td align=\"center\" valign=\"top\">\n                <div class=\"invoice-container\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"margin-bottom: 40px;\">\n                        <tr><td align=\"left\">\n                            <h2 style=\"font-size: 20px; font-weight: 600; color: #1f2937; margin: 0 0 24px 0;\">ACH/Domestic Wire Instructions</h2>\n                            <p style=\"font-size: 16px; color: #6b7280; margin: 0 0 16px 0;\">Bank details</p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\">ACH and Wire routing number: <span style=\"color: #1f2937; font-weight: 600;\">121145349</span></p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\">Account number: <span style=\"color: #1f2937; font-weight: 600;\">776236290086789</span></p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\">Account type: <span style=\"color: #1f2937; font-weight: 600;\">Business Checking</span></p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\">Bank name: <span style=\"color: #1f2937; font-weight: 600;\">Column NA - BREX</span></p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 24px 0;\">Bank address: <span style=\"color: #1f2937; font-weight: 600;\">1 Letterman Drive Building A, Suite A4-700, San Francisco, CA 94129 - United States</span></p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\">Beneficiary name: <span style=\"color: #1f2937; font-weight: 600;\">Zinnia Group LLC</span></p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\">Beneficiary address: <span style=\"color: #1f2937; font-weight: 600;\">16192 Coastal Hwy, Lewes, DE 19958 - United States</span></p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0;\">EIN: <span style=\"color: #1f2937; font-weight: 600;\">98-1826070</span></p>\n                        </td></tr>\n                    </table>\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\"><tr><td style=\"border-top: 1px solid #e5e7eb;\"></td></tr></table>\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"margin-top: 40px;\">\n                        <tr><td align=\"left\">\n                            <h2 style=\"font-size: 20px; font-weight: 600; color: #1f2937; margin: 0 0 24px 0;\">International Wire Instructions</h2>\n                            <p style=\"font-size: 16px; font-weight: 600; color: #1f2937; margin: 0 0 16px 0;\">Step 1 - Enter beneficiary bank information</p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\">SWIFT/BIC Code: <span style=\"color: #1f2937; font-weight: 600;\">CLNOUS66BRX</span></p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\">Bank Name: <span style=\"color: #1f2937; font-weight: 600;\">Column NA - Brex</span></p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 24px 0;\">Bank Address: <span style=\"color: #1f2937; font-weight: 600;\">1 Letterman Drive Building A, Suite A4-700, San Francisco, CA 94129</span></p>\n                            <p style=\"font-size: 16px; font-weight: 600; color: #1f2937; margin: 0 0 16px 0;\">Step 2 - Enter Intermediary bank information</p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\">SWIFT/BIC code: <span style=\"color: #1f2937; font-weight: 600;\">CHASUS33</span></p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\">Bank name: <span style=\"color: #1f2937; font-weight: 600;\">JPMorgan Chase Bank N.A.</span></p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 24px 0;\">Bank address: <span style=\"color: #1f2937; font-weight: 600;\">383 Madison Avenue, New York, NY 10179</span></p>\n                            <p style=\"font-size: 16px; font-weight: 600; color: #1f2937; margin: 0 0 16px 0;\">Step 3 - Enter beneficiary information</p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\">Beneficiary name: <span style=\"color: #1f2937; font-weight: 600;\">Zinnia Group LLC</span></p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0 0 4px 0;\">Beneficiary account number: <span style=\"color: #1f2937; font-weight: 600;\">776236290086789</span></p>\n                            <p style=\"font-size: 14px; color: #6b7280; margin: 0;\">Beneficiary address: <span style=\"color: #1f2937; font-weight: 600;\">16192 Coastal Hwy, Lewes, DE 19958</span></p>\n                        </td></tr>\n                    </table>\n                </div>\n                <div class=\"footer-container\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                        <tr><td align=\"left\" style=\"font-size: 14px; color: #ffffff; line-height: 1.5;\">\n                            <p style=\"font-weight: 400; margin: 0 0 8px 0;\">Terms & Conditions</p>\n                            <p style=\"margin: 0;\">Please pay within net 15 days of receiving this invoice.</p>\n                            <p style=\"margin: 0;\">Invoices not paid within 30 days are subject to a 1.5% monthly finance charge</p>\n                        </td></tr>\n                    </table>\n                </div>\n            </td></tr>\n        </table>\n        <!-- INVOICE END -->\n      `;\n    }).join('<div class=\"page-break\"></div>');\n\n    return `\n      <!DOCTYPE html>\n      <html lang=\"es\">\n      <head>\n        <meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <title>Zinnia Invoices</title>\n        <!--[if !mso]><!-->\n        <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n        <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n        <link href=\"https://fonts.googleapis.com/css2?family=Host+Grotesk:wght@600&family=Inter:wght@400;600&display=swap\" rel=\"stylesheet\">\n        <!--<![endif]-->\n        <style>\n            body, table, td, a { -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }\n            table, td { mso-table-lspace: 0pt; mso-table-rspace: 0pt; }\n            img { -ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }\n            table { border-collapse: collapse !important; }\n            body { background-color: #ffffff; height: 100% !important; margin: 0 !important; padding: 40px 20px !important; width: 100% !important; font-family: 'Inter', sans-serif; font-weight: 400; }\n            .invoice-container, .header-box { max-width: 800px; margin: 0 auto; background: #f2f3f1; border-radius: 12px; padding: 40px 24px; border: 1px solid #d7dae0; }\n            .header-box { margin-bottom: 20px; padding: 32px 24px; }\n            .footer-container { max-width: 800px; margin: 20px auto 0 auto; background: #242D4F; border-radius: 12px; padding: 32px 24px; }\n            .page-break { page-break-before: always; margin-top: 40px; }\n            @media print {\n                .page-break { page-break-before: always; margin-top: 0; }\n                body { padding: 0 !important; background-color: #ffffff !important; }\n                .invoice-container, .header-box { background-color: #f2f3f1 !important; -webkit-print-color-adjust: exact; color-adjust: exact; }\n                .footer-container { background-color: #242D4F !important; -webkit-print-color-adjust: exact; color-adjust: exact; }\n            }\n        </style>\n      </head>\n      <body>${allInvoicesHTML}</body>\n      </html>\n    `;\n  };\n\n  const generateAndDownloadHTML = () => {\n    setIsGenerating(true);\n    setTimeout(() => {\n        const htmlContent = generateInvoiceHTML();\n        const invoiceDateFormatted = new Date(invoiceDate).toISOString().split('T')[0];\n        const filename = `Zinnia-Invoices-${invoiceDateFormatted}.html`;\n        const blob = new Blob([htmlContent], { type: 'text/html' });\n        const link = document.createElement('a');\n        link.href = URL.createObjectURL(blob);\n        link.download = filename;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(link.href);\n        setIsGenerating(false);\n    }, 100);\n  };\n\n  const generateAndPrintHTML = () => {\n    setIsGenerating(true);\n    setTimeout(() => {\n      const htmlContent = generateInvoiceHTML();\n      const printWindow = window.open('', '_blank');\n      if (printWindow) {\n        printWindow.document.write(htmlContent);\n        printWindow.document.close();\n        printWindow.focus();\n        printWindow.print();\n      } else {\n        console.error(\"La ventana emergente para impresión fue bloqueada por el navegador.\");\n      }\n      setIsGenerating(false);\n    }, 150);\n  };\n\n  const recalculateSubtotal = (invoiceData) => {\n    const baseAmount = (parseFloat(invoiceData.rate) || 0) * (parseFloat(invoiceData.quantity) || 1);\n    const addOnsTotal = (invoiceData.addOns || []).reduce((sum, addon) => sum + (parseFloat(addon.rate || 0) * parseFloat(addon.quantity || 1)), 0);\n    invoiceData.subtotalAmount = (baseAmount + addOnsTotal).toString();\n  };\n\n  const addSelectedClient = () => {\n    const firstClient = clients[0];\n    if (!firstClient) return;\n    setSelectedClients([...selectedClients, {\n      clientId: firstClient.id,\n      invoiceNumber: '',\n      subject: \"Marketing and Strategy Services\",\n      itemDetail: firstClient.standardSubject,\n      quantity: '1',\n      rate: firstClient.standardAmount,\n      subtotalAmount: firstClient.standardAmount,\n      addOns: []\n    }]);\n  };\n\n  const updateSelectedClient = (index, field, value) => {\n    const updated = [...selectedClients];\n    const currentInvoice = updated[index];\n    \n    if (field === 'clientId') { value = parseInt(value); }\n    currentInvoice[field] = value;\n\n    if (field === 'clientId') {\n        const newClient = clients.find(c => c.id === value);\n        if(newClient) {\n            currentInvoice.subject = \"Marketing and Strategy Services\";\n            currentInvoice.itemDetail = newClient.standardSubject;\n            currentInvoice.rate = newClient.standardAmount;\n        }\n    }\n    \n    recalculateSubtotal(currentInvoice);\n    setSelectedClients(updated);\n  };\n\n  const removeSelectedClient = (index) => {\n    setSelectedClients(selectedClients.filter((_, i) => i !== index));\n  };\n  \n  const addAddOn = (clientIndex) => {\n    const updated = [...selectedClients];\n    if (!updated[clientIndex].addOns) updated[clientIndex].addOns = [];\n    updated[clientIndex].addOns.push({ description: '', rate: '', quantity: '1' });\n    setSelectedClients(updated);\n  };\n\n  const updateAddOn = (clientIndex, addonIndex, field, value) => {\n    const updated = [...selectedClients];\n    updated[clientIndex].addOns[addonIndex][field] = value;\n    recalculateSubtotal(updated[clientIndex]);\n    setSelectedClients(updated);\n  };\n\n  const removeAddOn = (clientIndex, addonIndex) => {\n    const updated = [...selectedClients];\n    updated[clientIndex].addOns.splice(addonIndex, 1);\n    recalculateSubtotal(updated[clientIndex]);\n    setSelectedClients(updated);\n  };\n\n  return (\n    <>\n    <ConfirmationModal\n        isOpen={confirmationModal.isOpen}\n        onClose={() => setConfirmationModal({ isOpen: false })}\n        onConfirm={confirmationModal.onConfirm}\n        title={confirmationModal.title}\n    >\n        {confirmationModal.message}\n    </ConfirmationModal>\n    <div className=\"min-h-screen bg-gray-50 p-6\" style={{backgroundColor: '#f2f3f1', fontFamily: 'Aptos, sans-serif'}}>\n      <div className=\"max-w-6xl mx-auto\">\n        <div className=\"bg-white rounded-lg shadow-sm border p-6 mb-6\" style={{borderColor: '#ebecea'}}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-2xl font-bold\" style={{color: '#242d4f'}}>Invoice Automation</h1>\n              <p className=\"mt-1\" style={{color: '#000000'}}>Zinnia Group LLC</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm border mb-6\" style={{borderColor: '#ebecea'}}>\n          <div className=\"flex border-b\" style={{borderColor: '#ebecea'}}>\n            <button onClick={() => setActiveTab('generate')} className={`px-6 py-3 font-medium text-sm flex items-center gap-2 ${activeTab === 'generate' ? 'border-b-2' : 'hover:opacity-80'}`} style={{color: activeTab === 'generate' ? '#242d4f' : '#ccbea7', borderBottomColor: activeTab === 'generate' ? '#dff266' : 'transparent', backgroundColor: activeTab === 'generate' ? 'rgba(223, 242, 102, 0.1)' : 'transparent'}}>\n              <FileText size={16} /> Generar invoice\n            </button>\n            <button onClick={() => setActiveTab('clients')} className={`px-6 py-3 font-medium text-sm flex items-center gap-2 ${activeTab === 'clients' ? 'border-b-2' : 'hover:opacity-80'}`} style={{color: activeTab === 'clients' ? '#242d4f' : '#ccbea7', borderBottomColor: activeTab === 'clients' ? '#dff266' : 'transparent', backgroundColor: activeTab === 'clients' ? 'rgba(223, 242, 102, 0.1)' : 'transparent'}}>\n              <Users size={16} /> Gestionar clientes ({clients.length})\n            </button>\n          </div>\n\n          {activeTab === 'generate' && (\n            <div className=\"p-6\">\n              {clients.length === 0 ? (\n                <div className=\"text-center py-12\"><p>Primero, añade clientes en la pestaña \"Gestionar clientes\".</p></div>\n              ) : (\n                <div className=\"space-y-6\">\n                   <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium mb-2\" style={{color: '#242d4f'}}>Invoice date</label>\n                        <input type=\"date\" value={invoiceDate} onChange={(e) => setInvoiceDate(e.target.value)} className=\"w-full px-3 py-2 border rounded-md\" style={{borderColor: '#ebecea'}}/>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium mb-2\" style={{color: '#242d4f'}}>Due date</label>\n                        <input type=\"date\" value={dueDate} onChange={(e) => setDueDate(e.target.value)} className=\"w-full px-3 py-2 border rounded-md\" style={{borderColor: '#ebecea'}}/>\n                      </div>\n                   </div>\n\n                   <div>\n                      <div className=\"flex justify-between items-center mb-4\">\n                        <h3 className=\"text-lg font-medium\" style={{color: '#242d4f'}}>Cliente a facturar</h3>\n                        <button onClick={addSelectedClient} className=\"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md\" style={{backgroundColor: '#dff266', color: '#242d4f'}}>\n                            <Plus className=\"mr-1 h-4 w-4\" /> Agregar cliente\n                        </button>\n                      </div>\n                      <div className=\"mt-4\">\n                          {selectedClients.length > 0 ? (\n                            <div className=\"space-y-4\">\n                              {selectedClients.map((selectedClient, index) => {\n                                const client = clients.find(c => c.id === selectedClient.clientId);\n                                const { total } = client ? calculateTotals(selectedClient.subtotalAmount, client.taxRate, client.hasTax) : { total: 0 };\n                                return (\n                                  <div key={index} className=\"border rounded-lg p-4 bg-gray-50\" style={{borderColor: '#ebecea'}}>\n                                      <div className=\"flex justify-between items-start mb-4\">\n                                          <h4 className=\"font-medium text-gray-900\">Invoice para {client?.name || 'cliente'}</h4>\n                                          <button onClick={() => removeSelectedClient(index)} className=\"text-red-600 hover:text-red-800\"><Trash2 size={16} /></button>\n                                      </div>\n                                      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                                        <div>\n                                          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Billed to</label>\n                                          <select value={selectedClient.clientId} onChange={(e) => updateSelectedClient(index, 'clientId', e.target.value)} className=\"w-full px-3 py-2 border border-gray-300 rounded-md\">\n                                            {clients.map(c => (<option key={c.id} value={c.id}>{c.name}</option>))}\n                                          </select>\n                                        </div>\n                                        <div>\n                                          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Invoice number</label>\n                                          <div className=\"flex items-center\">\n                                              <span className=\"text-gray-500 pr-2\">#ZN-</span>\n                                              <input type=\"text\" value={selectedClient.invoiceNumber} onChange={(e) => updateSelectedClient(index, 'invoiceNumber', e.target.value)} className=\"w-full px-3 py-2 border border-gray-300 rounded-md\" placeholder=\"ej: 43\" />\n                                          </div>\n                                        </div>\n                                        <div>\n                                          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Subject</label>\n                                          <input type=\"text\" value={selectedClient.subject} onChange={(e) => updateSelectedClient(index, 'subject', e.target.value)} className=\"w-full px-3 py-2 border border-gray-300 rounded-md\" />\n                                        </div>\n                                      </div>\n                                      \n                                      <div className=\"mt-4 border-t pt-4\">\n                                          <h5 className=\"text-md font-medium text-gray-800 mb-2\">Detalles del invoice</h5>\n                                          <div className=\"grid grid-cols-12 gap-2 items-end mb-2\">\n                                              <div className=\"col-span-6\"><label className=\"text-xs font-medium text-gray-500\">Item Detail</label><input type=\"text\" value={selectedClient.itemDetail} onChange={(e) => updateSelectedClient(index, 'itemDetail', e.target.value)} className=\"w-full px-2 py-1 border border-gray-300 rounded-md text-sm\" /></div>\n                                              <div className=\"col-span-2\"><label className=\"text-xs font-medium text-gray-500\">Qty</label><input type=\"number\" value={selectedClient.quantity} onChange={(e) => updateSelectedClient(index, 'quantity', e.target.value)} className=\"w-full px-2 py-1 border border-gray-300 rounded-md text-sm\" /></div>\n                                              <div className=\"col-span-3\"><label className=\"text-xs font-medium text-gray-500\">Rate</label><input type=\"number\" step=\"0.01\" value={selectedClient.rate} onChange={(e) => updateSelectedClient(index, 'rate', e.target.value)} className=\"w-full px-2 py-1 border border-gray-300 rounded-md text-sm\" /></div>\n                                          </div>\n                                          {selectedClient.addOns.map((addon, addonIndex) => (\n                                             <div key={addonIndex} className=\"grid grid-cols-12 gap-2 items-end mb-2\">\n                                                  <div className=\"col-span-6\"><input type=\"text\" placeholder=\"Descripción del ítem adicional\" value={addon.description} onChange={e => updateAddOn(index, addonIndex, 'description', e.target.value)} className=\"w-full px-2 py-1 border border-gray-300 rounded-md text-sm\" /></div>\n                                                  <div className=\"col-span-2\"><input type=\"number\" placeholder=\"1\" value={addon.quantity} onChange={e => updateAddOn(index, addonIndex, 'quantity', e.target.value)} className=\"w-full px-2 py-1 border border-gray-300 rounded-md text-sm\" /></div>\n                                                  <div className=\"col-span-3\"><input type=\"number\" step=\"0.01\" placeholder=\"0.00\" value={addon.rate} onChange={e => updateAddOn(index, addonIndex, 'rate', e.target.value)} className=\"w-full px-2 py-1 border border-gray-300 rounded-md text-sm\" /></div>\n                                                  <div className=\"col-span-1\"><button onClick={() => removeAddOn(index, addonIndex)} className=\"text-red-500 hover:text-red-700 p-1\"><X size={16}/></button></div>\n                                             </div>\n                                          ))}\n                                          <button onClick={() => addAddOn(index)} className=\"text-sm text-blue-600 hover:text-blue-800 font-medium mt-2\"><Plus size={14} className=\"inline mr-1\"/>Añadir Ítem</button>\n                                      </div>\n\n                                       <div className=\"mt-4 p-3 bg-blue-50 rounded-md\">\n                                          <div className=\"flex justify-between items-center\">\n                                              <span className=\"font-medium text-blue-900\">Amount:</span>\n                                              <span className=\"text-lg font-bold text-blue-900\">${total.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} USD</span>\n                                          </div>\n                                      </div>\n                                  </div>\n                                );\n                              })}\n                            </div>\n                          ) : (\n                            <div className=\"text-center py-12 px-6 border-2 border-dashed rounded-lg\" style={{borderColor: '#ccbea7'}}>\n                                <Clock className=\"mx-auto h-12 w-12\" style={{color: '#ccbea7'}} />\n                                <p className=\"mt-4 text-lg font-medium\" style={{color: '#ccbea7'}}>\n                                    No hay clientes seleccionados\n                                </p>\n                            </div>\n                          )}\n                      </div>\n                   </div>\n\n                  {selectedClients.length > 0 && (\n                    <div className=\"border-t pt-6 mt-6\">\n                      <div className=\"flex justify-end gap-4\">\n                        <button\n                          onClick={generateAndPrintHTML}\n                          disabled={isGenerating}\n                          className=\"inline-flex items-center justify-center px-6 py-3 border border-gray-300 text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n                        >\n                          {isGenerating ? <Loader className=\"animate-spin mr-2 h-5 w-5\" /> : <Printer className=\"mr-2 h-5 w-5\" />}\n                          Imprimir HTML\n                        </button>\n                        <button\n                          onClick={generateAndDownloadHTML}\n                          disabled={isGenerating}\n                          className=\"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white transition-all hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed\"\n                          style={{backgroundColor: '#242d4f', color: '#ffffff'}}\n                        >\n                          {isGenerating ? <Loader className=\"animate-spin mr-2 h-5 w-5\" /> : <Download className=\"mr-2 h-5 w-5\" />}\n                          Descargar HTML\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'clients' && (\n            <div className=\"p-6\">\n              <div className=\"flex justify-between items-center mb-6\">\n                 <h2 className=\"text-lg font-medium\" style={{color: '#242d4f'}}>Gestionar clientes</h2>\n                 <button onClick={() => { resetClientForm(); setEditingClient(null); setShowClientForm(true); }} className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white\" style={{backgroundColor: '#242d4f'}}>\n                    <Plus className=\"mr-2 h-4 w-4\" /> Nuevo Cliente\n                 </button>\n              </div>\n\n              {showClientForm && (\n                <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-6 mb-6\">\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-4\">{editingClient ? 'Editar Cliente' : 'Nuevo Cliente'}</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div><label className=\"block text-sm font-medium text-gray-700 mb-1\">Nombre del Cliente *</label><input type=\"text\" value={clientForm.name} onChange={(e) => setClientForm({...clientForm, name: e.target.value})} className=\"w-full px-3 py-2 border border-gray-300 rounded-md\" placeholder=\"Nombre de la Empresa\" /></div>\n                    <div><label className=\"block text-sm font-medium text-gray-700 mb-1\">NIF (opcional)</label><input type=\"text\" value={clientForm.taxId} onChange={(e) => setClientForm({...clientForm, taxId: e.target.value})} className=\"w-full px-3 py-2 border border-gray-300 rounded-md\" placeholder=\"ej: NIF\" /></div>\n                    <div><label className=\"block text-sm font-medium text-gray-700 mb-1\">Dirección Línea 1 *</label><input type=\"text\" value={clientForm.address} onChange={(e) => setClientForm({...clientForm, address: e.target.value})} className=\"w-full px-3 py-2 border border-gray-300 rounded-md\" placeholder=\"Dirección principal\" /></div>\n                    <div><label className=\"block text-sm font-medium text-gray-700 mb-1\">Dirección Línea 2 (opcional)</label><input type=\"text\" value={clientForm.address2} onChange={(e) => setClientForm({...clientForm, address2: e.target.value})} className=\"w-full px-3 py-2 border border-gray-300 rounded-md\" placeholder=\"Piso, apartamento, etc.\" /></div>\n                    <div><label className=\"block text-sm font-medium text-gray-700 mb-1\">Importe Estándar *</label><input type=\"number\" step=\"0.01\" value={clientForm.standardAmount} onChange={(e) => setClientForm({...clientForm, standardAmount: e.target.value})} className=\"w-full px-3 py-2 border border-gray-300 rounded-md\" placeholder=\"0.00\" /></div>\n                    <div><label className=\"block text-sm font-medium text-gray-700 mb-1\">Detalle del Ítem Estándar *</label><input type=\"text\" value={clientForm.standardSubject} onChange={(e) => setClientForm({...clientForm, standardSubject: e.target.value})} className=\"w-full px-3 py-2 border border-gray-300 rounded-md\" placeholder=\"Descripción del servicio\" /></div>\n                    <div className=\"md:col-span-2 grid grid-cols-2 gap-4 items-center\">\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Tasa de Impuesto (%)</label>\n                            <input \n                                type=\"number\" \n                                step=\"0.01\" \n                                value={clientForm.taxRate} \n                                onChange={(e) => setClientForm({...clientForm, taxRate: e.target.value})} \n                                className=\"w-full px-3 py-2 border border-gray-300 rounded-md disabled:bg-gray-200\" \n                                placeholder=\"0.00\"\n                                disabled={!clientForm.hasTax}\n                            />\n                        </div>\n                        <div className=\"flex items-end h-full pb-2\">\n                            <label className=\"flex items-center gap-2 text-sm font-medium text-gray-700\">\n                                <input \n                                    type=\"checkbox\" \n                                    checked={clientForm.hasTax} \n                                    onChange={(e) => setClientForm({...clientForm, hasTax: e.target.checked})} \n                                    className=\"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                                />\n                                Aplica Impuesto\n                            </label>\n                        </div>\n                    </div>\n                  </div>\n                  <div className=\"flex justify-end gap-3 mt-6\">\n                    <button onClick={() => setShowClientForm(false)} className=\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50\">Cancelar</button>\n                    <button onClick={handleSaveClient} disabled={!clientForm.name || !clientForm.address || !clientForm.standardAmount || !clientForm.standardSubject} className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400\">\n                        <Save className=\"mr-2 h-4 w-4 inline\" /> {editingClient ? 'Actualizar' : 'Guardar'} Cliente\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n                {clients.map(client => (\n                  <div key={client.id} className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\">\n                    <div className=\"flex justify-between items-start mb-3\">\n                      <h3 className=\"font-medium text-gray-900\">{client.name}</h3>\n                      <div className=\"flex gap-2\">\n                        <button onClick={() => handleEditClient(client)} className=\"text-blue-600 hover:text-blue-800\"><Edit2 size={16} /></button>\n                        <button onClick={() => handleDeleteClient(client.id)} className=\"text-red-600 hover:text-red-800\"><Trash2 size={16} /></button>\n                      </div>\n                    </div>\n                    <div className=\"space-y-2 text-sm text-gray-600\">\n                      {client.taxId && <p><span className=\"font-medium\">NIF:</span> {client.taxId}</p>}\n                      <p><span className=\"font-medium\">Dirección:</span> {client.address}</p>\n                      {client.address2 && <p>{client.address2}</p>}\n                      <p><span className=\"font-medium\">Importe Est.:</span> ${parseFloat(client.standardAmount).toFixed(2)} USD</p>\n                      <p><span className=\"font-medium\">Detalle Est.:</span> {client.standardSubject}</p>\n                      <p><span className=\"font-medium\">Tasa Imp.:</span> {client.hasTax ? `${client.taxRate}%` : 'N/A'}</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n    </>\n  );\n};\n\nexport default ZinniaInvoiceGenerator;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}